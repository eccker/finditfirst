let sha256=ascii=>{let rightRotate=(value,amount)=>{return value>>>amount|value<<32-amount},mathPow=Math.pow,maxWord=mathPow(2,32),lengthProperty="length",i,j,result="",words=[],asciiBitLength=8*ascii[lengthProperty],hash=sha256.h=sha256.h||[],k=sha256.k=sha256.k||[],primeCounter=k[lengthProperty],isComposite={};for(let candidate=2;64>primeCounter;candidate++){if(!isComposite[candidate]){for(i=0;313>i;i+=candidate){isComposite[i]=candidate}hash[primeCounter]=0|mathPow(candidate,.5)*maxWord;k[primeCounter++]=0|mathPow(candidate,1/3)*maxWord}}ascii+="\x80";while(ascii[lengthProperty]%64-56)ascii+="\0";for(i=0;i<ascii[lengthProperty];i++){j=ascii.charCodeAt(i);if(j>>8)return;words[i>>2]|=j<<8*((3-i)%4)}words[words[lengthProperty]]=0|asciiBitLength/maxWord;words[words[lengthProperty]]=asciiBitLength;for(j=0;j<words[lengthProperty];){let w=words.slice(j,j+=16),oldHash=hash;hash=hash.slice(0,8);for(i=0;64>i;i++){let w15=w[i-15],w2=w[i-2],a=hash[0],e=hash[4],temp1=hash[7]+(rightRotate(e,6)^rightRotate(e,11)^rightRotate(e,25))+(e&hash[5]^~e&hash[6])+k[i]+(w[i]=16>i?w[i]:0|w[i-16]+(rightRotate(w15,7)^rightRotate(w15,18)^w15>>>3)+w[i-7]+(rightRotate(w2,17)^rightRotate(w2,19)^w2>>>10)),temp2=(rightRotate(a,2)^rightRotate(a,13)^rightRotate(a,22))+(a&hash[1]^a&hash[2]^hash[1]&hash[2]);hash=[0|temp1+temp2].concat(hash);hash[4]=0|hash[4]+temp1}for(i=0;8>i;i++){hash[i]=0|hash[i]+oldHash[i]}}for(i=0;8>i;i++){for(j=3;j+1;j--){let b=255&hash[i]>>8*j;result+=(16>b?0:"")+b.toString(16)}}return result},writeCookie=(cookieName,value,days)=>{let date,expires;if(days){date=new Date;date.setTime(date.getTime()+1e3*(60*(60*(24*days))));expires="; expires="+date.toGMTString()}else{expires=""}document.cookie=cookieName+"="+window.btoa(value)+expires+"; path=/"},makeSecret=length=>{let result=``,characters=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,charactersLength=characters.length;for(let i=0;i<length;i++){result+=characters.charAt(Math.floor(Math.random()*charactersLength))}return result},getJSON=(url,callback)=>{var xhr=new XMLHttpRequest;xhr.open("GET",url,!0);xhr.responseType="text";xhr.onload=()=>{var status=xhr.status;if(200==status){callback(null,xhr.response)}else{callback(status)}};xhr.send()};window.onunload=()=>{socket.removeAllListeners()};let getCookie=cookieName=>{let dc=document.cookie,prefix=cookieName+"=",begin=dc.indexOf("; "+prefix),end;if(-1==begin){begin=dc.indexOf(prefix);if(0!=begin)return null}else{begin+=2;end=document.cookie.indexOf(";",begin);if(-1==end){end=dc.length}}return decodeURI(dc.substring(begin+prefix.length,end))},uJWT;window.history.forward();let noBack=()=>{window.history.forward()};const cookieNameApp=`ayekiluaapp`;let hashedpassword,loadAfterOnload=function(){var _ref=babelHelpers.asyncToGenerator(function*(){let userCookie=yield getCookie(cookieNameApp);null===userCookie?uJWT=0:uJWT=1;let script=document.createElement("script");script.onload=()=>{if(0===uJWT){let oPayload={user:{id:`${makeSecret(32)}`,name:`${makeSecret(32)}`,nounce:`${makeSecret(32)}`},credentials:{username:`${makeSecret(32)}`,hashedpassword:`${sha256(makeSecret(32))}`}};hashedpassword=oPayload.credentials.hashedpassword;window.localStorage.setItem("hashedpassword",hashedpassword);let sHeader=JSON.stringify({alg:"HS256",typ:"JWT"}),sPayload=JSON.stringify(oPayload),randomKey=makeSecret(32),preuserJWT=KJUR.jws.JWS.sign("HS256",sHeader,sPayload,randomKey);getJSON(`/token/${preuserJWT}/${randomKey}`,(err,data)=>{if(null!=err){console.error(err)}else{window.localStorage.setItem("userJWT",data);writeCookie(cookieNameApp,data,1);let userJWT=window.localStorage.getItem("userJWT");getJSON(`/auth/${userJWT}/${hashedpassword}`,(err,data)=>{if(null!=err){console.error(err)}else{console.log(data);new p5(sketch)}})}})}else{let userJWT=window.localStorage.getItem("userJWT");hashedpassword=window.localStorage.getItem("hashedpassword");getJSON(`/auth/${userJWT}/${hashedpassword}`,(err,data)=>{if(null!=err){console.error(err)}else{console.log(data);new p5(sketch)}})}};script.src="/js/jsrsasign-latest-all-min.js";document.head.appendChild(script)});return function(){return _ref.apply(this,arguments)}}();